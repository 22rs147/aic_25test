# Copilot Instructions for 総合機器センター予約システム

## プロジェクト概要
- 本システムは「総合機器センター予約システム」。機器・部屋・メンバーの管理と予約機能を提供。
- 主要なロジック・画面は `src/` 配下に集約。
- 画面・機能へのアクセスは必ず `index.php` 経由（例: `index.php?to=inst&do=foo`）。

## ディレクトリ構成
- `src/controllers/` : 機能ごとのコントローラー（例: `Instrument.php`, `Reserve.php`）
- `src/models/` : データモデル・ロジック（例: `Member.php`, `Room.php`）
- `src/views/` : 画面表示用PHP（例: `aic_list.php`, `inst_detail.php`）
- `conf/` : 環境設定ファイル
- `data/` : DBスキーマ・テストデータ
- `js/`, `css/`, `img/` : 静的アセットデータ
- `test/` : テスト用SQL・プログラムファイル

## コーディング規約（抜粋）
- PHPタグは `<?php ?>`, `<?= ?>` のみ。終了タグは原則不要。
- 文字コードは UTF-8（BOM無し）。
- 副作用のあるコード（画面出力・設定変更等）と副作用のないコード（クラス・関数定義等）は同一ファイルに混在させない。
- クラス名: StudlyCaps（例: `class Instrument {}`）
- 関数名: camelCase（例: `function getName($id)`）
- 変数名: 小文字＋アンダーバー（例: `$first_name`）
- 定数名: 全大文字＋アンダーバー（例: `const FACULTY_CODE = 'RS';`）
- インデントはスペース4文字。Tabは使用しない。
- 制御文キーワード後はスペース1つ。

## アーキテクチャ・データフロー
- MVC風構成。コントローラーがモデルを操作し、ビューにデータを渡す。
- 画面遷移・機能呼び出しは `index.php` の `do` パラメータで分岐。
- DBアクセスはモデルクラスで実装。

## 開発・運用ワークフロー
- ローカル開発は XAMPP（Windows）環境を前提。
- DBスキーマ・テストデータは `data/` に格納。
- テストDB・基にしたプログラムファイルは`test/`に格納。
- Composerによる依存管理（`composer.json`/`vendor/`）。
- テスト用SQLは `test/DB/` 配下。
‐ `model/Util`と`model/KsuCode`はヘルパー関数が含まれるのでviewファイルで呼び出しても良い。

## 重要な慣習・注意点
- すべての新規画面・機能は `src/` 配下に追加。
- 画面表示は必ずビュークラス/ファイルを通す。
- URL設計は `index.php?to=xxx&do=xxx` 形式に統一。
- DBのビュー `vw_reserve` は未使用。
‐ 必ず日本語で回答は生成する。コメントアウトも日本語で記述する。

## 参考ファイル
- `README.md` : 仕様・規約の詳細
- `src/controllers/`, `src/models/`, `src/views/` : 主要な設計・実装例
- `conf/develop_env.php` : 環境設定例

## コメントアウトのルール
‐ 文末は「。」で終える。体言止め（名詞で終える）は避ける。
良い例: // データベースに接続します。
悪い例: // データベース接続
- コメントはコードの直前または同じ行に記述する。
‐ 処理の「意図」と「理由」にコメントを付ける。
良い例: // セキュリティ上の理由から、管理者のみこの操作を許可する。
悪い例: // ユーザーが管理者か確認する。
- コードの先頭にナンバリングを付けない。
---